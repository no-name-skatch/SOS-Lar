{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { createContext, useState, useEffect } from 'react';\nimport { supabase } from \"../initSupabase\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar AuthContext = createContext({});\nvar AuthProvider = function AuthProvider(props) {\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    user = _useState2[0],\n    setUser = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    session = _useState4[0],\n    setSession = _useState4[1];\n  useEffect(function () {\n    var session = supabase.auth.session();\n    setSession(session);\n    setUser(session ? true : false);\n    var _supabase$auth$onAuth = supabase.auth.onAuthStateChange(function _callee(event, session) {\n        return _regeneratorRuntime.async(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                console.log(\"Supabase auth event: \" + event);\n                setSession(session);\n                setUser(session ? true : false);\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, null, null, null, Promise);\n      }),\n      authListener = _supabase$auth$onAuth.data;\n    return function () {\n      authListener.unsubscribe();\n    };\n  }, [user]);\n  return _jsx(AuthContext.Provider, {\n    value: {\n      user: user,\n      session: session\n    },\n    children: props.children\n  });\n};\nexport { AuthContext, AuthProvider };","map":{"version":3,"names":["React","createContext","useState","useEffect","supabase","AuthContext","AuthProvider","props","user","setUser","session","setSession","auth","onAuthStateChange","event","console","log","authListener","data","unsubscribe","children"],"sources":["D:/Users/Usuario/Downloads/TCC-main/SOS-LAR/src/provider/AuthProvider.tsx"],"sourcesContent":["import React, { createContext, useState, useEffect } from 'react';\nimport { supabase } from '../initSupabase';\nimport { Session } from '@supabase/supabase-js';\ntype ContextProps = {\n\tuser: null | boolean;\n\tsession: Session | null;\n};\n\nconst AuthContext = createContext<Partial<ContextProps>>({});\n\ninterface Props {\n\tchildren: React.ReactNode;\n}\n\nconst AuthProvider = (props: Props) => {\n\t// user null = loading\n\tconst [user, setUser] = useState<null | boolean>(null);\n\tconst [session, setSession] = useState<Session | null>(null);\n\n\tuseEffect(() => {\n\t\tconst session = supabase.auth.session();\n\t\tsetSession(session);\n\t\tsetUser(session ? true : false);\n\t\tconst { data: authListener } = supabase.auth.onAuthStateChange(\n\t\t\tasync (event, session) => {\n\t\t\t\tconsole.log(`Supabase auth event: ${event}`);\n\t\t\t\tsetSession(session);\n\t\t\t\tsetUser(session ? true : false);\n\t\t\t}\n\t\t);\n\t\treturn () => {\n\t\t\tauthListener!.unsubscribe();\n\t\t};\n\t}, [user]);\n\n\treturn (\n\t\t<AuthContext.Provider\n\t\t\tvalue={{\n\t\t\t\tuser,\n\t\t\t\tsession,\n\t\t\t}}\n\t\t>\n\t\t\t{props.children}\n\t\t</AuthContext.Provider>\n\t);\n};\n\nexport { AuthContext, AuthProvider };\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AACjE,SAASC,QAAQ;AAA0B;AAO3C,IAAMC,WAAW,GAAGJ,aAAa,CAAwB,CAAC,CAAC,CAAC;AAM5D,IAAMK,YAAY,GAAG,SAAfA,YAAY,CAAIC,KAAY,EAAK;EAEtC,gBAAwBL,QAAQ,CAAiB,IAAI,CAAC;IAAA;IAA/CM,IAAI;IAAEC,OAAO;EACpB,iBAA8BP,QAAQ,CAAiB,IAAI,CAAC;IAAA;IAArDQ,OAAO;IAAEC,UAAU;EAE1BR,SAAS,CAAC,YAAM;IACf,IAAMO,OAAO,GAAGN,QAAQ,CAACQ,IAAI,CAACF,OAAO,EAAE;IACvCC,UAAU,CAACD,OAAO,CAAC;IACnBD,OAAO,CAACC,OAAO,GAAG,IAAI,GAAG,KAAK,CAAC;IAC/B,4BAA+BN,QAAQ,CAACQ,IAAI,CAACC,iBAAiB,CAC7D,iBAAOC,KAAK,EAAEJ,OAAO;QAAA;UAAA;YAAA;cAAA;gBACpBK,OAAO,CAACC,GAAG,2BAAyBF,KAAK,CAAG;gBAC5CH,UAAU,CAACD,OAAO,CAAC;gBACnBD,OAAO,CAACC,OAAO,GAAG,IAAI,GAAG,KAAK,CAAC;cAAC;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,CAChC,CACD;MANaO,YAAY,yBAAlBC,IAAI;IAOZ,OAAO,YAAM;MACZD,YAAY,CAAEE,WAAW,EAAE;IAC5B,CAAC;EACF,CAAC,EAAE,CAACX,IAAI,CAAC,CAAC;EAEV,OACC,KAAC,WAAW,CAAC,QAAQ;IACpB,KAAK,EAAE;MACNA,IAAI,EAAJA,IAAI;MACJE,OAAO,EAAPA;IACD,CAAE;IAAA,UAEDH,KAAK,CAACa;EAAQ,EACO;AAEzB,CAAC;AAED,SAASf,WAAW,EAAEC,YAAY"},"metadata":{},"sourceType":"module"}